jQuery(document).ready(function($) {

    /***

     *   General Menu

     ***/

    let menuBodyCover = $('.menu-overlay_js');

    let mobileMenu = $('.mobile-nav_js');

    let menuOpenButton = $(".menu-open-btn_js");

    let menuCloseButton = $(".menu-close-btn_js" );



    //  Menu Button Open

    menuOpenButton.click(function() {

        $('body').addClass("no-ovrf");

        mobileMenu.addClass( "active" );

        menuBodyCover.addClass('active');

        $('#qs-notif-list_js').removeClass('open-notif');

    });

    //  Menu Button Close

    menuCloseButton.click(function() {

        $('body').removeClass("no-ovrf");

        mobileMenu.removeClass( "active");

        menuBodyCover.removeClass('active');



    });

    // Close menu click on Cover

    menuBodyCover.click(function(){

        $(this).removeClass('active');

        mobileMenu.removeClass( "active");

        $('body').removeClass("no-ovrf");

    });

    //  Sub Menu Open

    $(".general-menu_js li .mobile-menu-icon").click(function(){

        let activeClass = 'active';

        let menuItem = $(this).parent();

        if($(menuItem).hasClass(activeClass)){

            $(menuItem).removeClass(activeClass);

        }

        else{

            $(menuItem).addClass(activeClass).siblings().removeClass(activeClass);

        }

    });





    function add_scrolling_element(element, add_class_point){

        let scroll_point;

        let scroll_down_point = add_class_point;

        let start_animation_point = 1.5*scroll_down_point;

        let end_animation_point = 1.5*scroll_down_point;



        let scroll_position = window.scrollY;

        if(scroll_position > 0){

            $(element).addClass('scrolled')

        }



        window.addEventListener('scroll', function () {

            let scroll_height = window.scrollY;



            if(scroll_height > scroll_point && scroll_height > start_animation_point){

                $(element).addClass('start-animate');

            }



            if(scroll_height > scroll_point){

                $(element).addClass('scroll-down');

                $(element).removeClass('scroll-up end-animate');



            } else {

                $(element).addClass('scroll-up');

                $(element).removeClass('scroll-down start-animate')

            }



            if(scroll_height < scroll_point && scroll_height < end_animation_point){

                $(element).addClass('end-animate');

            }



            scroll_point = scroll_height;



            if(scroll_point < scroll_down_point || scroll_point === 0){

                $(element).removeClass('scroll-down scroll-up start-animate')

            }

            if(scroll_height < 100){

                $(element).removeClass('end-animate')

            }

            $(element).removeClass('scrolled')

        });

    }

    add_scrolling_element('.header-jump_js', 200)



    //// **** Desktop ACCORDION **** ////

    let accItem = $('.prefix-accordion li');

    let accItemActive = $('.prefix-accordion li.active');

    if (accItemActive.hasClass('active')){

        accItemActive.children().next().show();

    }

    accItem.on('click',function(e){

        console.log('sdfsdfsdfsdf')

        //  Disable click on content

        e.preventDefault();

        //  Accordion

        let accItemActive = $(this).find('a').attr('href');

        $(this).addClass('active').siblings().removeClass('active');

        $(this).children().next().slideDown(100);

        $(this).siblings().children().next().slideUp(100);

    });





    // Home Slider

    let home_slider =  $('#home-slider');

    let home_slider_dots = '.home-sldr--dots';

    if(home_slider.length !== 0){

        home_slider.slick({

            infinite: false,

            slidesToShow: 1,

            adaptiveHeight: true,

            arrows: false,

            dots: false,

            fade: true,

            autoplay: true,

            speed: 300,

            autoplaySpeed: 2000,

            pauseOnHover: false,

            appendDots: home_slider_dots,

            pauseOnFocus: false

        })

        .on('afterChange', function (event, slick, currentSlide) {

            if (slick.currentSlide >= slick.slideCount - slick.options.slidesToShow) {

				setTimeout(e=>{	document.getElementsByClassName('pre_registration')[0].style.opacity = '1';}, 1500);



				         setTimeout(e=>{window.location.href = '/indica/video-page/';}, 3000);

                reinitSlick();

            }

        });





var reinitSlick = () => {    

    home_slider.slick('slickSetOption', {

      'autoplay': false

    }, false);

}

        

    }







    function show_remove_item(uploads, controls){

        let remove_item_btn = $('<a href="#remove" class="qs-btn btn-red btn-sm remove-item">Remove</a>');



        uploads.on('change', function () {

            if(uploads.is(':checked')){

                controls.append(remove_item_btn);

            }

            else{

                remove_item_btn.remove()

            }

            uploads.each(function () {

                if ($(this).prop('checked')===true){

                    console.log('checked')

                }

            })

        })

    }



    //

    // show_remove_item($('#upload-group-1 input'), $('#upload-group-1 .qs-profile--buttons'));

    // show_remove_item($('#upload-group-2 input'), $('#upload-group-2 .qs-profile--buttons'));

    // show_remove_item($('#upload-group-3 input'), $('#upload-group-3 .qs-profile--buttons'));

    // show_remove_item($('#upload-group-single input'), $('#upload-group-single .qs-profile--buttons'));





    //  chat

    $('.qs-chat--user').on('click',function () {

        $('.qs-chat--display').toggleClass('display');

        $('.qs-chat--users').toggleClass('no-display');

    })

    $('.back-label').on('click',function () {

        $('.qs-chat--display').removeClass('display');

        $('.qs-chat--users').removeClass('no-display');

    });



    //  Range

    // $('[data-rangeslider]').rangeslider({

    //     polyfill: false

    // });



    //  Notification list open

    $('#qs-notif_js').on("click", function () {

        $('#qs-notif-list_js').toggleClass('open-notif');

    })



















});





